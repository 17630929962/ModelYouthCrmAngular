(function (global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('@angular/core'), require('@angular/common'), require('rxjs'), require('@angular/forms')) :
    typeof define === 'function' && define.amd ? define('ngx-tinymce', ['exports', '@angular/core', '@angular/common', 'rxjs', '@angular/forms'], factory) :
    (factory((global['ngx-tinymce'] = {}),global.ng.core,global.ng.common,global.rxjs,global.ng.forms));
}(this, (function (exports,core,common,rxjs,forms) { 'use strict';

    var TinymceOptions = /** @class */ (function () {
        function TinymceOptions() {
            /** 指定tinymce目录路径，默认：`./assets/tinymce/` */
            this.baseURL = './assets/tinymce/';
            /** 指定tinymce文件名，默认：`tinymce.min.js` */
            this.fileName = 'tinymce.min.js';
        }
        return TinymceOptions;
    }());

    var ScriptService = /** @class */ (function () {
        function ScriptService(doc) {
            this.doc = doc;
            this.loaded = false;
            this.list = {};
            this.emitter = new rxjs.Subject();
        }
        ScriptService.prototype.getChangeEmitter = function () {
            return this.emitter;
        };
        ScriptService.prototype.load = function (path) {
            var _this = this;
            if (this.loaded) {
                return this;
            }
            this.loaded = true;
            var promises = [];
            [path].forEach(function (script) { return promises.push(_this.loadScript(script)); });
            Promise.all(promises).then(function (res) {
                _this.emitter.next(true);
            });
            return this;
        };
        ScriptService.prototype.loadScript = function (path) {
            var _this = this;
            return new Promise(function (resolve, reject) {
                if (_this.list[path] === true) {
                    resolve({
                        path: path,
                        loaded: true,
                        status: 'Loaded',
                    });
                    return;
                }
                _this.list[path] = true;
                var node = _this.doc.createElement('script');
                node.type = 'text/javascript';
                node.src = path;
                node.charset = 'utf-8';
                if (node.readyState) {
                    // IE
                    node.onreadystatechange = function () {
                        if (node.readyState === 'loaded' ||
                            node.readyState === 'complete') {
                            node.onreadystatechange = null;
                            resolve({
                                path: path,
                                loaded: true,
                                status: 'Loaded',
                            });
                        }
                    };
                }
                else {
                    node.onload = function () {
                        resolve({
                            path: path,
                            loaded: true,
                            status: 'Loaded',
                        });
                    };
                }
                node.onerror = function (error) {
                    return resolve({
                        path: path,
                        loaded: false,
                        status: 'Loaded',
                    });
                };
                _this.doc.getElementsByTagName('head')[0].appendChild(node);
            });
        };
        ScriptService.decorators = [
            { type: core.Injectable }
        ];
        /** @nocollapse */
        ScriptService.ctorParameters = function () {
            return [
                { type: undefined, decorators: [{ type: core.Inject, args: [common.DOCUMENT,] }] }
            ];
        };
        return ScriptService;
    }());

    var TinymceComponent = /** @class */ (function () {
        function TinymceComponent(defConfig, ss, cd, zone) {
            this.defConfig = defConfig;
            this.ss = ss;
            this.cd = cd;
            this.zone = zone;
            this.inited = false;
            this.load = true;
            this.id = "_tinymce-" + Math.random()
                .toString(36)
                .substring(2);
            this._disabled = false;
            /** 延迟初始化 */
            this.delay = 0;
        }
        Object.defineProperty(TinymceComponent.prototype, "disabled", {
            set: function (value) {
                this._disabled = value;
                this.setDisabled();
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(TinymceComponent.prototype, "loading", {
            set: function (value) {
                if (value instanceof core.TemplateRef)
                    this._loadingTpl = value;
                else
                    this._loading = value;
            },
            enumerable: true,
            configurable: true
        });
        TinymceComponent.prototype.initDelay = function () {
            var _this = this;
            if (this.delay > 0) {
                setTimeout(function () { return _this.init(); }, this.delay);
            }
            else {
                this.init();
            }
        };
        TinymceComponent.prototype.init = function () {
            var _this = this;
            if (!window.tinymce)
                throw new Error('tinymce js文件加载失败');
            var _a = this, defConfig = _a.defConfig, config = _a.config, id = _a.id;
            if (this.instance)
                return;
            if (defConfig.baseURL) {
                var url = '' + defConfig.baseURL;
                if (url.endsWith('/'))
                    url = url.substr(0, url.length - 1);
                tinymce.baseURL = url;
            }
            var userOptions = Object.assign({}, defConfig.config, config);
            var options = Object.assign({
                selector: "#" + id,
            }, defConfig.config, config, {
                setup: function (editor) {
                    _this.instance = editor;
                    editor.on('change keyup', function () {
                        _this.value = editor.getContent();
                        _this.zone.run(function () { return _this.onChange(_this.value); });
                    });
                    if (typeof userOptions.setup === 'function') {
                        userOptions.setup(editor);
                    }
                },
                init_instance_callback: function (editor) {
                    if (editor && _this.value)
                        editor.setContent(_this.value);
                    _this.setDisabled();
                    if (typeof userOptions.init_instance_callback === 'function') {
                        userOptions.init_instance_callback(editor);
                    }
                },
            });
            if (userOptions.auto_focus) {
                options.auto_focus = id;
            }
            tinymce.init(options);
            this.load = false;
            this.cd.detectChanges();
        };
        TinymceComponent.prototype.destroy = function () {
            if (!this.instance) {
                return;
            }
            this.instance.off();
            this.instance.remove('#' + this.id);
            this.instance = null;
        };
        TinymceComponent.prototype.setDisabled = function () {
            if (!this.instance)
                return;
            this.instance.setMode(this._disabled ? 'readonly' : 'design');
        };
        TinymceComponent.prototype.ngOnInit = function () {
            this.inited = true;
        };
        TinymceComponent.prototype.ngAfterViewInit = function () {
            var _this = this;
            // 已经存在对象无须进入懒加载模式
            if (window.tinymce) {
                this.initDelay();
                return;
            }
            var defConfig = this.defConfig;
            var baseURL = defConfig && defConfig.baseURL;
            var fileName = defConfig && defConfig.fileName;
            this.ss
                .load((baseURL || './assets/tinymce/') + (fileName || 'tinymce.min.js'))
                .getChangeEmitter()
                .subscribe(function () { return _this.initDelay(); });
        };
        TinymceComponent.prototype.ngOnChanges = function (changes) {
            if (this.inited && changes.config) {
                this.destroy();
                this.initDelay();
            }
        };
        TinymceComponent.prototype.ngOnDestroy = function () {
            this.destroy();
        };
        // reuse-tab: http://ng-alain.com/components/reuse-tab#%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F
        TinymceComponent.prototype._onReuseInit = function () {
            this.destroy();
            this.initDelay();
        };
        TinymceComponent.prototype.writeValue = function (value) {
            // value should be NOT NULL
            this.value = value || '';
            if (this.instance) {
                this.instance.setContent(this.value);
            }
        };
        TinymceComponent.prototype.registerOnChange = function (fn) {
            this.onChange = fn;
        };
        TinymceComponent.prototype.registerOnTouched = function (fn) {
            this.onTouched = fn;
        };
        TinymceComponent.prototype.setDisabledState = function (isDisabled) {
            this.disabled = isDisabled;
            this.setDisabled();
        };
        TinymceComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'tinymce',
                        template: "\n  <textarea id=\"{{id}}\" class=\"tinymce-selector\"></textarea>\n  <div class=\"loading\" *ngIf=\"load\">\n    <ng-container *ngIf=\"_loading; else _loadingTpl\">{{_loading}}</ng-container>\n  </div>\n  ",
                        preserveWhitespaces: false,
                        providers: [
                            {
                                provide: forms.NG_VALUE_ACCESSOR,
                                useExisting: core.forwardRef(function () { return TinymceComponent; }),
                                multi: true,
                            },
                        ],
                        changeDetection: core.ChangeDetectionStrategy.OnPush,
                        styles: ["\n      :host .tinymce-selector {\n        display: none;\n      }\n    "]
                    }] }
        ];
        /** @nocollapse */
        TinymceComponent.ctorParameters = function () {
            return [
                { type: TinymceOptions },
                { type: ScriptService },
                { type: core.ChangeDetectorRef },
                { type: core.NgZone }
            ];
        };
        TinymceComponent.propDecorators = {
            config: [{ type: core.Input }],
            disabled: [{ type: core.Input }],
            loading: [{ type: core.Input }],
            delay: [{ type: core.Input }]
        };
        return TinymceComponent;
    }());

    var NgxTinymceModule = /** @class */ (function () {
        function NgxTinymceModule() {
        }
        NgxTinymceModule.forRoot = function (options) {
            return {
                ngModule: NgxTinymceModule,
                providers: [
                    ScriptService,
                    { provide: TinymceOptions, useValue: options },
                ],
            };
        };
        NgxTinymceModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [common.CommonModule],
                        declarations: [TinymceComponent],
                        exports: [TinymceComponent],
                    },] }
        ];
        return NgxTinymceModule;
    }());

    /**
     * Generated bundle index. Do not edit.
     */

    exports.ɵa = ScriptService;
    exports.TinymceComponent = TinymceComponent;
    exports.TinymceOptions = TinymceOptions;
    exports.NgxTinymceModule = NgxTinymceModule;

    Object.defineProperty(exports, '__esModule', { value: true });

})));

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmd4LXRpbnltY2UudW1kLmpzLm1hcCIsInNvdXJjZXMiOlsibmc6Ly9uZ3gtdGlueW1jZS9zcmMvdGlueW1jZS5vcHRpb25zLnRzIiwibmc6Ly9uZ3gtdGlueW1jZS9zcmMvdGlueW1jZS5zY3JpcHQuc2VydmljZS50cyIsIm5nOi8vbmd4LXRpbnltY2Uvc3JjL3RpbnltY2UuY29tcG9uZW50LnRzIiwibmc6Ly9uZ3gtdGlueW1jZS9zcmMvdGlueW1jZS5tb2R1bGUudHMiLCJuZzovL25neC10aW55bWNlL25neC10aW55bWNlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjbGFzcyBUaW55bWNlT3B0aW9ucyB7XHJcbiAgLyoqIMOmwozCh8Olwq7CmnRpbnltY2XDp8Kbwq7DpcK9wpXDqMK3wq/DpcK+woTDr8K8wozDqcK7wpjDqMKuwqTDr8K8wppgLi9hc3NldHMvdGlueW1jZS9gICovXHJcbiAgYmFzZVVSTCA/ID0gJy4vYXNzZXRzL3RpbnltY2UvJztcclxuICAvKiogw6bCjMKHw6XCrsKadGlueW1jZcOmwpbCh8OkwrvCtsOlwpDCjcOvwrzCjMOpwrvCmMOowq7CpMOvwrzCmmB0aW55bWNlLm1pbi5qc2AgKi9cclxuICBmaWxlTmFtZSA/ID0gJ3RpbnltY2UubWluLmpzJztcclxuICAvKiogw6nCu8KYw6jCrsKkw6nChcKNw6fCvcKuw6nCocK5w6/CvMKMw6XCr8K5w6XChcKow6XCscKAIFRpbnltY2Ugw6bCnMKJw6bClcKIICovXHJcbiAgY29uZmlnPzogYW55O1xyXG4gIC8qKiDDpcK7wrbDqMK/wp/DpcKKwqDDqMK9wr3Dr8K8wojDpcKNwpXDpMK9wo3Dr8K8wprDpsKvwqvDp8KnwpLDr8K8wonDr8K8wozDqcK7wpjDqMKuwqTDr8K8wppgMGAgKi9cclxuICBkZWxheT86IG51bWJlcjtcclxufVxyXG4iLCJpbXBvcnQgeyBJbmplY3RhYmxlLCBJbmplY3QgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgRE9DVU1FTlQgfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xyXG5pbXBvcnQgeyBTdWJqZWN0IH0gZnJvbSAncnhqcyc7XHJcblxyXG5ASW5qZWN0YWJsZSgpXHJcbmV4cG9ydCBjbGFzcyBTY3JpcHRTZXJ2aWNlIHtcclxuICBwcml2YXRlIGxvYWRlZCA9IGZhbHNlO1xyXG4gIHByaXZhdGUgbGlzdDogYW55ID0ge307XHJcbiAgcHJpdmF0ZSBlbWl0dGVyOiBTdWJqZWN0PGJvb2xlYW4+ID0gbmV3IFN1YmplY3Q8Ym9vbGVhbj4oKTtcclxuXHJcbiAgY29uc3RydWN0b3IoQEluamVjdChET0NVTUVOVCkgcHJpdmF0ZSBkb2M6IGFueSkge31cclxuXHJcbiAgZ2V0Q2hhbmdlRW1pdHRlcigpIHtcclxuICAgIHJldHVybiB0aGlzLmVtaXR0ZXI7XHJcbiAgfVxyXG5cclxuICBsb2FkKHBhdGg6IHN0cmluZykge1xyXG4gICAgaWYgKHRoaXMubG9hZGVkKSB7XHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMubG9hZGVkID0gdHJ1ZTtcclxuXHJcbiAgICBjb25zdCBwcm9taXNlczogUHJvbWlzZTxhbnk+W10gPSBbXTtcclxuXHJcbiAgICBbcGF0aF0uZm9yRWFjaChzY3JpcHQgPT4gcHJvbWlzZXMucHVzaCh0aGlzLmxvYWRTY3JpcHQoc2NyaXB0KSkpO1xyXG5cclxuICAgIFByb21pc2UuYWxsKHByb21pc2VzKS50aGVuKHJlcyA9PiB7XHJcbiAgICAgIHRoaXMuZW1pdHRlci5uZXh0KHRydWUpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfVxyXG5cclxuICBsb2FkU2NyaXB0KHBhdGg6IHN0cmluZyk6IFByb21pc2U8YW55PiB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICBpZiAodGhpcy5saXN0W3BhdGhdID09PSB0cnVlKSB7XHJcbiAgICAgICAgcmVzb2x2ZSg8YW55PntcclxuICAgICAgICAgIHBhdGg6IHBhdGgsXHJcbiAgICAgICAgICBsb2FkZWQ6IHRydWUsXHJcbiAgICAgICAgICBzdGF0dXM6ICdMb2FkZWQnLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5saXN0W3BhdGhdID0gdHJ1ZTtcclxuXHJcbiAgICAgIGNvbnN0IG5vZGUgPSB0aGlzLmRvYy5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcclxuICAgICAgbm9kZS50eXBlID0gJ3RleHQvamF2YXNjcmlwdCc7XHJcbiAgICAgIG5vZGUuc3JjID0gcGF0aDtcclxuICAgICAgbm9kZS5jaGFyc2V0ID0gJ3V0Zi04JztcclxuICAgICAgaWYgKCg8YW55Pm5vZGUpLnJlYWR5U3RhdGUpIHtcclxuICAgICAgICAvLyBJRVxyXG4gICAgICAgICg8YW55Pm5vZGUpLm9ucmVhZHlzdGF0ZWNoYW5nZSA9ICgpID0+IHtcclxuICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgKDxhbnk+bm9kZSkucmVhZHlTdGF0ZSA9PT0gJ2xvYWRlZCcgfHxcclxuICAgICAgICAgICAgKDxhbnk+bm9kZSkucmVhZHlTdGF0ZSA9PT0gJ2NvbXBsZXRlJ1xyXG4gICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICg8YW55Pm5vZGUpLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IG51bGw7XHJcbiAgICAgICAgICAgIHJlc29sdmUoPGFueT57XHJcbiAgICAgICAgICAgICAgcGF0aDogcGF0aCxcclxuICAgICAgICAgICAgICBsb2FkZWQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgc3RhdHVzOiAnTG9hZGVkJyxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBub2RlLm9ubG9hZCA9ICgpID0+IHtcclxuICAgICAgICAgIHJlc29sdmUoPGFueT57XHJcbiAgICAgICAgICAgIHBhdGg6IHBhdGgsXHJcbiAgICAgICAgICAgIGxvYWRlZDogdHJ1ZSxcclxuICAgICAgICAgICAgc3RhdHVzOiAnTG9hZGVkJyxcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcbiAgICAgIH1cclxuICAgICAgbm9kZS5vbmVycm9yID0gKGVycm9yOiBhbnkpID0+XHJcbiAgICAgICAgcmVzb2x2ZSg8YW55PntcclxuICAgICAgICAgIHBhdGg6IHBhdGgsXHJcbiAgICAgICAgICBsb2FkZWQ6IGZhbHNlLFxyXG4gICAgICAgICAgc3RhdHVzOiAnTG9hZGVkJyxcclxuICAgICAgICB9KTtcclxuICAgICAgdGhpcy5kb2MuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKVswXS5hcHBlbmRDaGlsZChub2RlKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQge1xyXG4gIENvbXBvbmVudCxcclxuICBmb3J3YXJkUmVmLFxyXG4gIE9uQ2hhbmdlcyxcclxuICBPbkRlc3Ryb3ksXHJcbiAgSW5wdXQsXHJcbiAgT25Jbml0LFxyXG4gIEFmdGVyVmlld0luaXQsXHJcbiAgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksXHJcbiAgQ2hhbmdlRGV0ZWN0b3JSZWYsXHJcbiAgVGVtcGxhdGVSZWYsXHJcbiAgU2ltcGxlQ2hhbmdlcyxcclxuICBOZ1pvbmUsXHJcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IE5HX1ZBTFVFX0FDQ0VTU09SLCBDb250cm9sVmFsdWVBY2Nlc3NvciB9IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcclxuaW1wb3J0IHsgU2NyaXB0U2VydmljZSB9IGZyb20gJy4vdGlueW1jZS5zY3JpcHQuc2VydmljZSc7XHJcbmltcG9ydCB7IFRpbnltY2VPcHRpb25zIH0gZnJvbSAnLi90aW55bWNlLm9wdGlvbnMnO1xyXG5cclxuZGVjbGFyZSBjb25zdCB3aW5kb3c6IGFueTtcclxuZGVjbGFyZSBjb25zdCB0aW55bWNlOiBhbnk7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ3RpbnltY2UnLFxyXG4gIHRlbXBsYXRlOiBgXHJcbiAgPHRleHRhcmVhIGlkPVwie3tpZH19XCIgY2xhc3M9XCJ0aW55bWNlLXNlbGVjdG9yXCI+PC90ZXh0YXJlYT5cclxuICA8ZGl2IGNsYXNzPVwibG9hZGluZ1wiICpuZ0lmPVwibG9hZFwiPlxyXG4gICAgPG5nLWNvbnRhaW5lciAqbmdJZj1cIl9sb2FkaW5nOyBlbHNlIF9sb2FkaW5nVHBsXCI+e3tfbG9hZGluZ319PC9uZy1jb250YWluZXI+XHJcbiAgPC9kaXY+XHJcbiAgYCxcclxuICBwcmVzZXJ2ZVdoaXRlc3BhY2VzOiBmYWxzZSxcclxuICBzdHlsZXM6IFtcclxuICAgIGBcclxuICAgICAgOmhvc3QgLnRpbnltY2Utc2VsZWN0b3Ige1xyXG4gICAgICAgIGRpc3BsYXk6IG5vbmU7XHJcbiAgICAgIH1cclxuICAgIGAsXHJcbiAgXSxcclxuICBwcm92aWRlcnM6IFtcclxuICAgIHtcclxuICAgICAgcHJvdmlkZTogTkdfVkFMVUVfQUNDRVNTT1IsXHJcbiAgICAgIHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKCgpID0+IFRpbnltY2VDb21wb25lbnQpLFxyXG4gICAgICBtdWx0aTogdHJ1ZSxcclxuICAgIH0sXHJcbiAgXSxcclxuICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaCxcclxufSlcclxuZXhwb3J0IGNsYXNzIFRpbnltY2VDb21wb25lbnRcclxuICBpbXBsZW1lbnRzIE9uSW5pdCwgQWZ0ZXJWaWV3SW5pdCwgT25DaGFuZ2VzLCBPbkRlc3Ryb3ksIENvbnRyb2xWYWx1ZUFjY2Vzc29yIHtcclxuICBwcml2YXRlIGluc3RhbmNlOiBhbnk7XHJcbiAgcHJpdmF0ZSB2YWx1ZTogc3RyaW5nO1xyXG4gIHByaXZhdGUgaW5pdGVkID0gZmFsc2U7XHJcbiAgbG9hZCA9IHRydWU7XHJcbiAgaWQgPSBgX3RpbnltY2UtJHtNYXRoLnJhbmRvbSgpXHJcbiAgICAudG9TdHJpbmcoMzYpXHJcbiAgICAuc3Vic3RyaW5nKDIpfWA7XHJcblxyXG4gIHByaXZhdGUgb25DaGFuZ2U6ICh2YWx1ZTogc3RyaW5nKSA9PiB2b2lkO1xyXG4gIHByaXZhdGUgb25Ub3VjaGVkOiAoKSA9PiB2b2lkO1xyXG5cclxuICBASW5wdXQoKVxyXG4gIGNvbmZpZzogYW55O1xyXG4gIEBJbnB1dCgpXHJcbiAgc2V0IGRpc2FibGVkKHZhbHVlOiBib29sZWFuKSB7XHJcbiAgICB0aGlzLl9kaXNhYmxlZCA9IHZhbHVlO1xyXG4gICAgdGhpcy5zZXREaXNhYmxlZCgpO1xyXG4gIH1cclxuICBwcml2YXRlIF9kaXNhYmxlZCA9IGZhbHNlO1xyXG5cclxuICBfbG9hZGluZzogc3RyaW5nO1xyXG4gIF9sb2FkaW5nVHBsOiBUZW1wbGF0ZVJlZjxhbnk+O1xyXG4gIEBJbnB1dCgpXHJcbiAgc2V0IGxvYWRpbmcodmFsdWU6IHN0cmluZyB8IFRlbXBsYXRlUmVmPGFueT4pIHtcclxuICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIFRlbXBsYXRlUmVmKSB0aGlzLl9sb2FkaW5nVHBsID0gdmFsdWU7XHJcbiAgICBlbHNlIHRoaXMuX2xvYWRpbmcgPSB2YWx1ZTtcclxuICB9XHJcblxyXG4gIC8qKiDDpcK7wrbDqMK/wp/DpcKIwp3DpcKnwovDpcKMwpYgKi9cclxuICBASW5wdXQoKVxyXG4gIGRlbGF5ID0gMDtcclxuXHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBwcml2YXRlIGRlZkNvbmZpZzogVGlueW1jZU9wdGlvbnMsXHJcbiAgICBwcml2YXRlIHNzOiBTY3JpcHRTZXJ2aWNlLFxyXG4gICAgcHJpdmF0ZSBjZDogQ2hhbmdlRGV0ZWN0b3JSZWYsXHJcbiAgICBwcml2YXRlIHpvbmU6IE5nWm9uZSxcclxuICApIHt9XHJcblxyXG4gIHByaXZhdGUgaW5pdERlbGF5KCkge1xyXG4gICAgaWYgKHRoaXMuZGVsYXkgPiAwKSB7XHJcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy5pbml0KCksIHRoaXMuZGVsYXkpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5pbml0KCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGluaXQoKSB7XHJcbiAgICBpZiAoIXdpbmRvdy50aW55bWNlKSB0aHJvdyBuZXcgRXJyb3IoJ3RpbnltY2UganPDpsKWwofDpMK7wrbDpcKKwqDDqMK9wr3DpcKkwrHDqMK0wqUnKTtcclxuXHJcbiAgICBjb25zdCB7IGRlZkNvbmZpZywgY29uZmlnLCBpZCB9ID0gdGhpcztcclxuICAgIGlmICh0aGlzLmluc3RhbmNlKSByZXR1cm47XHJcblxyXG4gICAgaWYgKGRlZkNvbmZpZy5iYXNlVVJMKSB7XHJcbiAgICAgIGxldCB1cmwgPSAnJyArIGRlZkNvbmZpZy5iYXNlVVJMO1xyXG4gICAgICBpZiAodXJsLmVuZHNXaXRoKCcvJykpIHVybCA9IHVybC5zdWJzdHIoMCwgdXJsLmxlbmd0aCAtIDEpO1xyXG4gICAgICB0aW55bWNlLmJhc2VVUkwgPSB1cmw7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgdXNlck9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCBkZWZDb25maWcuY29uZmlnLCBjb25maWcpO1xyXG5cclxuICAgIGNvbnN0IG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKFxyXG4gICAgICB7XHJcbiAgICAgICAgc2VsZWN0b3I6IGAjYCArIGlkLFxyXG4gICAgICB9LFxyXG4gICAgICBkZWZDb25maWcuY29uZmlnLFxyXG4gICAgICBjb25maWcsXHJcbiAgICAgIHtcclxuICAgICAgICBzZXR1cDogKGVkaXRvcjogYW55KSA9PiB7XHJcbiAgICAgICAgICB0aGlzLmluc3RhbmNlID0gZWRpdG9yO1xyXG4gICAgICAgICAgZWRpdG9yLm9uKCdjaGFuZ2Uga2V5dXAnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSBlZGl0b3IuZ2V0Q29udGVudCgpO1xyXG4gICAgICAgICAgICB0aGlzLnpvbmUucnVuKCgpID0+IHRoaXMub25DaGFuZ2UodGhpcy52YWx1ZSkpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICBpZiAodHlwZW9mIHVzZXJPcHRpb25zLnNldHVwID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgIHVzZXJPcHRpb25zLnNldHVwKGVkaXRvcik7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBpbml0X2luc3RhbmNlX2NhbGxiYWNrOiAoZWRpdG9yOiBhbnkpID0+IHtcclxuICAgICAgICAgIGlmIChlZGl0b3IgJiYgdGhpcy52YWx1ZSkgZWRpdG9yLnNldENvbnRlbnQodGhpcy52YWx1ZSk7XHJcbiAgICAgICAgICB0aGlzLnNldERpc2FibGVkKCk7XHJcbiAgICAgICAgICBpZiAodHlwZW9mIHVzZXJPcHRpb25zLmluaXRfaW5zdGFuY2VfY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgdXNlck9wdGlvbnMuaW5pdF9pbnN0YW5jZV9jYWxsYmFjayhlZGl0b3IpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0sXHJcbiAgICApO1xyXG4gICAgaWYgKHVzZXJPcHRpb25zLmF1dG9fZm9jdXMpIHtcclxuICAgICAgb3B0aW9ucy5hdXRvX2ZvY3VzID0gaWQ7XHJcbiAgICB9XHJcblxyXG4gICAgdGlueW1jZS5pbml0KG9wdGlvbnMpO1xyXG5cclxuICAgIHRoaXMubG9hZCA9IGZhbHNlO1xyXG4gICAgdGhpcy5jZC5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGRlc3Ryb3koKSB7XHJcbiAgICBpZiAoIXRoaXMuaW5zdGFuY2UpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgdGhpcy5pbnN0YW5jZS5vZmYoKTtcclxuICAgIHRoaXMuaW5zdGFuY2UucmVtb3ZlKCcjJyArIHRoaXMuaWQpO1xyXG4gICAgdGhpcy5pbnN0YW5jZSA9IG51bGw7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHNldERpc2FibGVkKCkge1xyXG4gICAgaWYgKCF0aGlzLmluc3RhbmNlKSByZXR1cm47XHJcbiAgICB0aGlzLmluc3RhbmNlLnNldE1vZGUodGhpcy5fZGlzYWJsZWQgPyAncmVhZG9ubHknIDogJ2Rlc2lnbicpO1xyXG4gIH1cclxuXHJcbiAgbmdPbkluaXQoKSB7XHJcbiAgICB0aGlzLmluaXRlZCA9IHRydWU7XHJcbiAgfVxyXG5cclxuICBuZ0FmdGVyVmlld0luaXQoKTogdm9pZCB7XHJcbiAgICAvLyDDpcK3wrLDp8K7wo/DpcKtwpjDpcKcwqjDpcKvwrnDqMKxwqHDpsKXwqDDqcKhwrvDqMK/wpvDpcKFwqXDpsKHwpLDpcKKwqDDqMK9wr3DpsKowqHDpcK8wo9cclxuICAgIGlmICh3aW5kb3cudGlueW1jZSkge1xyXG4gICAgICB0aGlzLmluaXREZWxheSgpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgeyBkZWZDb25maWcgfSA9IHRoaXM7XHJcbiAgICBjb25zdCBiYXNlVVJMID0gZGVmQ29uZmlnICYmIGRlZkNvbmZpZy5iYXNlVVJMO1xyXG4gICAgY29uc3QgZmlsZU5hbWUgPSBkZWZDb25maWcgJiYgZGVmQ29uZmlnLmZpbGVOYW1lO1xyXG4gICAgdGhpcy5zc1xyXG4gICAgICAubG9hZCgoYmFzZVVSTCB8fCAnLi9hc3NldHMvdGlueW1jZS8nKSArIChmaWxlTmFtZSB8fCAndGlueW1jZS5taW4uanMnKSlcclxuICAgICAgLmdldENoYW5nZUVtaXR0ZXIoKVxyXG4gICAgICAuc3Vic2NyaWJlKCgpID0+IHRoaXMuaW5pdERlbGF5KCkpO1xyXG4gIH1cclxuXHJcbiAgbmdPbkNoYW5nZXMoY2hhbmdlczogU2ltcGxlQ2hhbmdlcyk6IHZvaWQge1xyXG4gICAgaWYgKHRoaXMuaW5pdGVkICYmIGNoYW5nZXMuY29uZmlnKSB7XHJcbiAgICAgIHRoaXMuZGVzdHJveSgpO1xyXG4gICAgICB0aGlzLmluaXREZWxheSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgbmdPbkRlc3Ryb3koKTogdm9pZCB7XHJcbiAgICB0aGlzLmRlc3Ryb3koKTtcclxuICB9XHJcblxyXG4gIC8vIHJldXNlLXRhYjogaHR0cDovL25nLWFsYWluLmNvbS9jb21wb25lbnRzL3JldXNlLXRhYiMlRTclOTQlOUYlRTUlOTElQkQlRTUlOTElQTglRTYlOUMlOUZcclxuICBfb25SZXVzZUluaXQoKSB7XHJcbiAgICB0aGlzLmRlc3Ryb3koKTtcclxuICAgIHRoaXMuaW5pdERlbGF5KCk7XHJcbiAgfVxyXG5cclxuICB3cml0ZVZhbHVlKHZhbHVlOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgIC8vIHZhbHVlIHNob3VsZCBiZSBOT1QgTlVMTFxyXG4gICAgdGhpcy52YWx1ZSA9IHZhbHVlIHx8ICcnO1xyXG4gICAgaWYgKHRoaXMuaW5zdGFuY2UpIHtcclxuICAgICAgdGhpcy5pbnN0YW5jZS5zZXRDb250ZW50KHRoaXMudmFsdWUpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmVnaXN0ZXJPbkNoYW5nZShmbjogKF86IGFueSkgPT4ge30pOiB2b2lkIHtcclxuICAgIHRoaXMub25DaGFuZ2UgPSBmbjtcclxuICB9XHJcbiAgcmVnaXN0ZXJPblRvdWNoZWQoZm46ICgpID0+IHt9KTogdm9pZCB7XHJcbiAgICB0aGlzLm9uVG91Y2hlZCA9IGZuO1xyXG4gIH1cclxuXHJcbiAgc2V0RGlzYWJsZWRTdGF0ZShpc0Rpc2FibGVkOiBib29sZWFuKTogdm9pZCB7XHJcbiAgICB0aGlzLmRpc2FibGVkID0gaXNEaXNhYmxlZDtcclxuICAgIHRoaXMuc2V0RGlzYWJsZWQoKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgTmdNb2R1bGUsIE1vZHVsZVdpdGhQcm92aWRlcnMgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgQ29tbW9uTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcclxuXHJcbmltcG9ydCB7IFRpbnltY2VPcHRpb25zIH0gZnJvbSAnLi90aW55bWNlLm9wdGlvbnMnO1xyXG5pbXBvcnQgeyBUaW55bWNlQ29tcG9uZW50IH0gZnJvbSAnLi90aW55bWNlLmNvbXBvbmVudCc7XHJcbmltcG9ydCB7IFNjcmlwdFNlcnZpY2UgfSBmcm9tICcuL3RpbnltY2Uuc2NyaXB0LnNlcnZpY2UnO1xyXG5cclxuQE5nTW9kdWxlKHtcclxuICBpbXBvcnRzOiBbQ29tbW9uTW9kdWxlXSxcclxuICBkZWNsYXJhdGlvbnM6IFtUaW55bWNlQ29tcG9uZW50XSxcclxuICBleHBvcnRzOiBbVGlueW1jZUNvbXBvbmVudF0sXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBOZ3hUaW55bWNlTW9kdWxlIHtcclxuICBzdGF0aWMgZm9yUm9vdChvcHRpb25zOiBUaW55bWNlT3B0aW9ucyk6IE1vZHVsZVdpdGhQcm92aWRlcnMge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgbmdNb2R1bGU6IE5neFRpbnltY2VNb2R1bGUsXHJcbiAgICAgIHByb3ZpZGVyczogW1xyXG4gICAgICAgIFNjcmlwdFNlcnZpY2UsXHJcbiAgICAgICAgeyBwcm92aWRlOiBUaW55bWNlT3B0aW9ucywgdXNlVmFsdWU6IG9wdGlvbnMgfSxcclxuICAgICAgXSxcclxuICAgIH07XHJcbiAgfVxyXG59XHJcbiIsIi8qKlxuICogR2VuZXJhdGVkIGJ1bmRsZSBpbmRleC4gRG8gbm90IGVkaXQuXG4gKi9cblxuZXhwb3J0ICogZnJvbSAnLi9pbmRleCc7XG5cbmV4cG9ydCB7U2NyaXB0U2VydmljZSBhcyDDicK1YX0gZnJvbSAnLi9zcmMvdGlueW1jZS5zY3JpcHQuc2VydmljZSc7Il0sIm5hbWVzIjpbIlN1YmplY3QiLCJJbmplY3RhYmxlIiwiSW5qZWN0IiwiRE9DVU1FTlQiLCJUZW1wbGF0ZVJlZiIsIkNvbXBvbmVudCIsIk5HX1ZBTFVFX0FDQ0VTU09SIiwiZm9yd2FyZFJlZiIsIkNoYW5nZURldGVjdGlvblN0cmF0ZWd5IiwiQ2hhbmdlRGV0ZWN0b3JSZWYiLCJOZ1pvbmUiLCJJbnB1dCIsIk5nTW9kdWxlIiwiQ29tbW9u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